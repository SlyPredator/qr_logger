<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QR Logger</title>
</head>
<body>
  <h2>Logging your scan...</h2>
  <div id="status">Please wait...</div>

  <script>
    function getQueryParam(param) {
      let urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    function logScan() {
      const name = getQueryParam('name') || 'Unknown';
      const postData = { name: name };

      // Replace with your actual Google Apps Script Web App URL
      const endpoint = 'https://script.google.com/macros/s/AKfycbwBHmyG3YS_RuXJrxhkrFqYvO-Y_eyMF_X-X-lJQc6_DaaC7flQw3QS7YVqB9pUu6Ry/exec';

      fetch(endpoint, {
        method: 'POST',
        mode: 'no-cors',  // Bypass CORS, no response visibility 
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(postData)
      })
      .catch(err => {
        // Ignore errors since no-cors hides them; just continue
      });

      document.getElementById('status').innerText = 'Logged! You may close this tab.';
    }

    logScan();
  </script>
</body>
</html>
